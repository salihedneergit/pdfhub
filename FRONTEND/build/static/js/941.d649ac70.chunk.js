"use strict";(self.webpackChunkhorizon_ui_tailwind_react=self.webpackChunkhorizon_ui_tailwind_react||[]).push([[941],{4941:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var t=a(5043),r=a(3313),i=a(4670),l=a(1009),c=a(579);const n=e=>{let{courses:s,onEditCourse:a,onDeleteCourse:n}=e;const[d,o]=(0,t.useState)(!1),[x,m]=(0,t.useState)(null),[h,u]=(0,t.useState)(""),[p,y]=(0,t.useState)("grid"),g=(0,t.useMemo)((()=>s.filter((e=>{const s=h.toLowerCase();return e.name.toLowerCase().includes(s)||e.folders.some((e=>e.name.toLowerCase().includes(s)||e.pdfs.some((e=>e.toLowerCase().includes(s)))))}))),[s,h]),f=()=>{const[e,s]=(0,t.useState)(h);return(0,c.jsxs)("div",{className:"m-5 mb-6 space-y-4",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,c.jsx)("div",{className:"relative flex-1 max-w-md"}),(0,c.jsx)("div",{className:"flex items-center space-x-2",children:(0,c.jsx)(j,{})})]}),h&&(0,c.jsxs)("div",{className:"m-5 text-lg text-gray-500 dark:text-gray-400",children:["Found ",g.length," ",1===g.length?"result":"results"]})]})},j=()=>(0,c.jsxs)("div",{className:"flex items-center rounded-lg bg-gray-100 p-1 dark:bg-gray-700",children:[(0,c.jsx)("button",{onClick:()=>y("grid"),className:"rounded-lg p-2 transition-colors ".concat("grid"===p?"bg-white text-[#4318ffd9] shadow-sm dark:bg-gray-600":"text-gray-500 hover:text-[#4318ffd9]"),children:(0,c.jsx)(l.QPV,{className:"h-5 w-5"})}),(0,c.jsx)("button",{onClick:()=>y("list"),className:"rounded-lg p-2 transition-colors ".concat("list"===p?"bg-white text-[#4318ffd9] shadow-sm dark:bg-gray-600":"text-gray-500 hover:text-[#4318ffd9]"),children:(0,c.jsx)(l.Wm,{className:"h-5 w-5"})})]}),b=e=>{let{course:s,isMobile:t=!1}=e;return(0,c.jsxs)(r.P.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-xl bg-white shadow-sm transition-all duration-200\n                 hover:shadow-md dark:bg-gray-800 ".concat(t?"p-4":"p-6","\n                 ").concat("list"===p?"col-span-full":""),onClick:()=>{m(s),o(!0)},children:[(0,c.jsxs)("div",{className:"flex items-center justify-between ".concat("list"===p?"mb-2":"mb-4"),children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-[#4318ffd9]/10",children:(0,c.jsx)(l.UDU,{className:"h-6 w-6 text-[#4318ffd9]"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.name}),(0,c.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.folders.length," ",1===s.folders.length?"folder":"folders"]})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),a(s)},className:"rounded-lg p-2 text-gray-600 transition-colors hover:bg-[#4318ffd9]/10 hover:text-[#4318ffd9]",children:(0,c.jsx)(l.WXf,{className:"h-5 w-5"})}),(0,c.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>(async(e,s)=>{if(s.stopPropagation(),window.confirm("Are you sure you want to delete this course?"))try{await n(e)}catch(a){console.error("Error deleting course:",a)}})(s._id,e),className:"rounded-lg p-2 text-gray-600 transition-colors hover:bg-red-50 hover:text-red-500",children:(0,c.jsx)(l.IXo,{className:"h-5 w-5"})})]})]}),(0,c.jsx)("div",{className:"space-y-4 ".concat("list"===p?"ml-16":""),children:s.folders.map((e=>(0,c.jsxs)("div",{className:"border-l-2 border-gray-100 pl-4 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"mb-2 flex items-center space-x-3",children:[(0,c.jsx)(l.fOo,{className:"h-4 w-4 text-gray-400"}),(0,c.jsx)("span",{className:"text-base font-medium text-gray-700 dark:text-gray-300",children:e.name}),(0,c.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.pdfs.length,")"]})]}),(0,c.jsx)("div",{className:"ml-6 space-y-2",children:e.pdfs.map((e=>(0,c.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,c.jsx)(l.QuH,{className:"h-4 w-4 text-red-500"}),(0,c.jsx)("span",{className:"truncate",children:e})]},e)))})]},e.name)))})]})},v=()=>(0,c.jsx)(i.N,{children:d&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-black/50 fixed inset-0 z-40 backdrop-blur-sm lg:hidden",onClick:()=>o(!1)}),(0,c.jsxs)(r.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20},className:"fixed bottom-0 right-0 top-0 z-50 w-full max-w-md overflow-y-auto  bg-white shadow-xl dark:bg-gray-800 lg:hidden",children:[(0,c.jsx)("div",{className:"mt-15 sticky top-0 border-b border-gray-200 bg-white p-4 dark:border-gray-700 dark:bg-gray-800",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Course Details"}),(0,c.jsx)("button",{onClick:()=>o(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400",children:(0,c.jsx)(l.yGN,{className:"h-6 w-6"})})]})}),(0,c.jsx)("div",{className:"p-4",children:x&&(0,c.jsx)(b,{course:x,isMobile:!0})})]})]})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f,{}),(0,c.jsx)("div",{className:"mb-4 lg:hidden",children:(0,c.jsx)("button",{onClick:()=>o(!0),className:"rounded-lg p-2 text-gray-600 hover:bg-[#4318ffd9]/10 hover:text-[#4318ffd9]"})}),(0,c.jsxs)(r.P.div,{layout:!0,className:"grid ".concat("grid"===p?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"," gap-6"),children:[g.map((e=>(0,c.jsx)(b,{course:e},e._id))),0===g.length&&(0,c.jsxs)("div",{className:"col-span-full py-12 text-center",children:[(0,c.jsx)(l.UDU,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),(0,c.jsx)("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:h?"No courses found matching your search.":"No courses found. Create your first course to get started."})]})]}),(0,c.jsx)(v,{})]})},d=e=>{let{onCourseCreated:s,courseToEdit:a,onClose:n}=e;const[d,o]=(0,t.useState)(""),[x,m]=(0,t.useState)([{name:"",pdfs:[]}]),[h,u]=(0,t.useState)([]),[p,y]=(0,t.useState)(!1),[g,f]=(0,t.useState)(null),[j,b]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("http://13.51.106.41:3001/api/pdf/list-pdfs"),s=await e.json();u(s)}catch(e){console.error("Error fetching PDFs:",e)}})(),a&&(o(a.name),m(a.folders))}),[a]);const v=(e,s)=>{const a=[...x],t=a[e];t.pdfs.includes(s)?t.pdfs=t.pdfs.filter((e=>e!==s)):t.pdfs=[...t.pdfs,s],m(a)},N={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return(0,c.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,c.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:n}),(0,c.jsx)("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:(0,c.jsxs)(r.P.div,{variants:{hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:20,stiffness:300}},exit:{opacity:0,scale:.9,y:20,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl",children:[(0,c.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?"Edit Course":"Create New Course"}),(0,c.jsx)(r.P.button,{whileHover:{rotate:90},transition:{duration:.2},onClick:n,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,c.jsx)(l.yGN,{className:"w-6 h-6"})})]})}),(0,c.jsx)("div",{className:"p-6",children:(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0);try{const e=a?"http://13.51.106.41:3001/api/course/update-course/".concat(a._id):"http://13.51.106.41:3001/api/course/create-course",t=await fetch(e,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,folders:x.filter((e=>""!==e.name.trim()))})}),r=await t.json();t.ok&&s(r.course)}catch(t){console.error("Error saving course:",t)}finally{y(!1)}},className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Course Name"}),(0,c.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300  focus:ring-2 focus:ring-primary/50 focus:border-primary  dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all duration-200",placeholder:"Enter course name",required:!0})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course Folders"}),(0,c.jsxs)(r.P.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{m([...x,{name:"",pdfs:[]}])},className:"flex items-center text-primary hover:text-primary/80  transition-colors px-3 py-1 rounded-lg hover:bg-primary/10",children:[(0,c.jsx)(l.E1u,{className:"w-4 h-4 mr-2"}),"Add Folder"]})]}),(0,c.jsx)("div",{className:"space-y-4",children:(0,c.jsx)(i.N,{children:x.map(((e,s)=>(0,c.jsxs)(r.P.div,{variants:N,initial:"hidden",animate:"visible",exit:"hidden",className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)(l.UDU,{className:"w-5 h-5 text-primary"}),(0,c.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,s)=>{const a=[...x];a[e].name=s,m(a)})(s,e.target.value),placeholder:"Folder name",className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,c.jsx)(r.P.button,{type:"button",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>(e=>{m(x.filter(((s,a)=>a!==e)))})(s),className:"text-red-500 hover:text-red-600 p-1",children:(0,c.jsx)(l.IXo,{className:"w-5 h-5"})})]}),(0,c.jsx)("div",{className:"pl-9",children:(0,c.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.pdfs.map((e=>(0,c.jsxs)("div",{className:"flex items-center bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[(0,c.jsx)(l.QuH,{className:"w-4 h-4 mr-2"}),e,(0,c.jsx)("button",{type:"button",onClick:()=>v(s,e),className:"ml-2 hover:text-red-500",children:(0,c.jsx)(l.yGN,{className:"w-4 h-4"})})]},e))),(0,c.jsxs)(r.P.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{f(s),b(!0)},className:"flex items-center text-primary hover:text-primary/80 px-3 py-1 rounded-full border border-primary/30 hover:bg-primary/10 text-sm",children:[(0,c.jsx)(l.E1u,{className:"w-4 h-4 mr-2"}),"Add PDFs"]})]})})]},s)))})})]}),(0,c.jsx)("div",{className:"pt-4",children:(0,c.jsx)(r.P.button,{type:"submit",disabled:p,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3 rounded-xl text-white font-medium bg-[#4318ffd9]\n                            shadow-lg shadow-primary/30 transition-all duration-200\n                            ".concat(p?"bg-primary/70 cursor-not-allowed":"bg-primary hover:bg-primary/90"),children:p?"Saving...":a?"Update Course":"Create Course"})})]})})]})}),(0,c.jsx)(i.N,{children:j&&(0,c.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-60 flex items-center justify-center p-4",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>b(!1)}),(0,c.jsxs)(r.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Select PDFs"}),(0,c.jsx)("div",{className:"max-h-96 overflow-y-auto",children:h.map((e=>{var s;return(0,c.jsx)(r.P.div,{whileHover:{x:4},className:"flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:(0,c.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer w-full",children:[(0,c.jsx)("input",{type:"checkbox",checked:null===(s=x[g])||void 0===s?void 0:s.pdfs.includes(e),onChange:()=>v(g,e),className:"w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary dark:border-gray-600"}),(0,c.jsxs)("span",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[(0,c.jsx)(l.QuH,{className:"w-4 h-4 mr-2 text-primary"}),e]})]})},e)}))}),(0,c.jsx)("div",{className:"mt-4 flex justify-end",children:(0,c.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!1),className:"px-4 py-2 bg-primary text-white rounded-lg",children:"Done"})})]})]})})]})};var o=a(3768);const x=()=>(0,c.jsx)("div",{className:"space-y-4",children:[1,2,3].map((e=>(0,c.jsx)("div",{className:"animate-pulse",children:(0,c.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg"})},e)))}),m=()=>{const[e,s]=(0,t.useState)([]),[a,m]=(0,t.useState)(!0),[h,u]=(0,t.useState)(null),[p,y]=(0,t.useState)(!1),[g,f]=(0,t.useState)(null),j=async()=>{try{f(null);const e=await fetch("http://13.51.106.41:3001/api/course/courses");if(!e.ok)throw new Error("Failed to fetch courses");const a=await e.json();return s(a.courses||[]),void setTimeout((()=>m(!1)),500)}catch(e){f(e.message),o.oR.error("Failed to load courses"),m(!1)}};(0,t.useEffect)((()=>{j()}),[]);return(0,c.jsxs)(r.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}}},className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8",children:[(0,c.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,c.jsx)(l.D1A,{className:"w-8 h-8 mr-3 text-primary"}),"Course Management"]}),(0,c.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage your courses and their content"})]}),(0,c.jsxs)(r.P.button,{variants:{hover:{scale:1.05,transition:{duration:.2,type:"spring",stiffness:400,damping:10}},tap:{scale:.95}},whileHover:"hover",whileTap:"tap",onClick:()=>{u(null),y(!0)},className:"inline-flex items-center px-4 py-2 bg-[#4318ffd9] text-white  rounded-lg shadow-lg shadow-primary/30 hover:bg-primary/90  transition-colors duration-200",children:[(0,c.jsx)(l.GGD,{className:"w-5 h-5 mr-2"}),"Create Course"]})]}),(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden",children:a?(0,c.jsx)("div",{className:"p-6",children:(0,c.jsx)(x,{})}):g?(0,c.jsxs)("div",{className:"p-6 text-center",children:[(0,c.jsx)("p",{className:"text-red-500",children:g}),(0,c.jsx)("button",{onClick:j,className:"mt-4 text-primary hover:text-primary/80",children:"Try Again"})]}):(0,c.jsx)(n,{courses:e,onEditCourse:e=>{u(e),y(!0)},onDeleteCourse:async e=>{try{if(!(await fetch("http://13.51.106.41:3001/api/course/delete-course/".concat(e),{method:"DELETE"})).ok)throw new Error("Failed to delete course");s((s=>s.filter((s=>s._id!==e)))),o.oR.success("Course deleted successfully!")}catch(a){o.oR.error("Failed to delete course")}}})}),(0,c.jsx)(i.N,{children:p&&(0,c.jsx)(d,{onCourseCreated:async e=>{try{s((s=>h?s.map((s=>s._id===e._id?e:s)):[e,...s])),u(null),y(!1),o.oR.success(h?"Course updated successfully!":"Course created successfully!")}catch(a){o.oR.error("Failed to save course")}},courseToEdit:h,onClose:()=>{y(!1),u(null)}})})]}),(0,c.jsx)(o.l$,{position:"bottom-right"})]})}}}]);
//# sourceMappingURL=941.d649ac70.chunk.js.map